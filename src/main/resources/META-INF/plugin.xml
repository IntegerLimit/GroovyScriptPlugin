<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.intlimit.grsplugin</id>
    <name>GroovyScript</name>
    <vendor>IntegerLimit</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>
    <depends>com.redhat.devtools.lsp4ij</depends>
    <depends>org.intellij.groovy</depends>

    <extensions defaultExtensionNs="com.redhat.devtools.lsp4ij">
        <server id="groovyscript"
                name="GroovyScript LSP Support"
                factoryClass="com.intlimit.grsplugin.lsp.GrSLanguageServerFactory">
            <description><![CDATA[
        GroovyScript LSP Support for Jetbrains IDEs
        ]]>
            </description>
        </server>
        <languageMapping language="Groovy"
                         serverId="groovyscript" />
        <fileTypeMapping fileType="Groovy"
                         serverId="groovyscript" />
    </extensions>

    <extensions defaultExtensionNs="com.intellij">
        <projectConfigurable
                parentId="language"
                instance="com.intlimit.grsplugin.settings.GrSSettingsConfigurable"
                id="com.intlimit.grsplugin.settings.GrSSettingsConfigurable"
                key="settings.display"
                bundle="messages.Settings"
        />

        <lang.foldingBuilder language="Groovy"
                             implementationClass="com.redhat.devtools.lsp4ij.features.foldingRange.LSPFoldingRangeBuilder"
                             order="first"/>

        <codeInsight.parameterInfo
                language="Groovy"
                implementationClass="com.redhat.devtools.lsp4ij.features.signatureHelp.LSPParameterInfoHandler"/>

        <lang.psiStructureViewFactory
                language="Groovy"
                implementationClass="com.redhat.devtools.lsp4ij.features.documentSymbol.LSPDocumentSymbolStructureViewFactory"/>
        
        <defaultLiveTemplates file="/liveTemplates/Preprocessors.xml" />
        <defaultLiveTemplates file="/liveTemplates/ObjectMappersVanilla.xml" />
        <defaultLiveTemplates file="/liveTemplates/ObjectMappersGregTech.xml" />
        <defaultLiveTemplates file="/liveTemplates/JEI.xml" />

        <completion.confidence id="GrSAllowCompletionInStrings" order="before groovyAdvanced" implementationClass="com.intlimit.grsplugin.features.completion.GrSAllowCompletionInStrings"
                               language="Groovy"/>
        <lookup.charFilter id="GrSObjectMapperCharFilter" order="first" implementation="com.intlimit.grsplugin.features.completion.GrSObjectMapperCharFilter" />

        <codeInsight.inlayProvider
                language="Groovy"
                implementationClass="com.intlimit.grsplugin.features.inlay.TextureHintsProvider" />

        <statusBarWidgetFactory id="GrSStatusBarFactory" order="last" implementation="com.intlimit.grsplugin.features.status.GrSStatusBarFactory" />
    </extensions>

    <resource-bundle>messages.Actions</resource-bundle>
    <actions>
        <group id="com.intlimit.grsplugin.features.action.Group"
               popup="true">
            <add-to-group group-id="ToolsMenu" anchor="after" relative-to-action="Groovy.Console"/>
            <action id="com.intlimit.grsplugin.features.action.StartGrSServerAction"
                    class="com.intlimit.grsplugin.features.action.StartGrSServerAction"
                    icon="AllIcons.Actions.Execute" />
            <action id="com.intlimit.grsplugin.features.action.StopGrSServerAction"
                    class="com.intlimit.grsplugin.features.action.StopGrSServerAction"
                    icon="AllIcons.Actions.Suspend" />
            <action id="com.intlimit.grsplugin.features.action.RestartGrSServerAction"
                    class="com.intlimit.grsplugin.features.action.RestartGrSServerAction"
                    icon="AllIcons.Actions.Restart" />
            <action id="com.intlimit.grsplugin.features.action.ShowGrSSettingsAction"
                    class="com.intlimit.grsplugin.features.action.ShowGrSSettingsAction"
                    icon="AllIcons.General.Settings" />
        </group>
    </actions>
</idea-plugin>
